# hydratyr

<div style="display: flex; align-contents: center; align-items: center; justify-content: center;">
  <img src="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAwMy41IDI2My43Ij48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudCIgeDE9IjkzNi42NSIgeTE9Ii01NS4xNSIgeDI9IjkzNi42NSIgeTI9IjI0OC41NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIuMDciIHN0b3AtY29sb3I9IiNkYmUwZmYiIHN0b3Atb3BhY2l0eT0iLjE3Ii8+PHN0b3Agb2Zmc2V0PSIuMTYiIHN0b3AtY29sb3I9IiNiMWJjZmYiIHN0b3Atb3BhY2l0eT0iLjM2Ii8+PHN0b3Agb2Zmc2V0PSIuMjYiIHN0b3AtY29sb3I9IiM4YjliZmYiIHN0b3Atb3BhY2l0eT0iLjUzIi8+PHN0b3Agb2Zmc2V0PSIuMzYiIHN0b3AtY29sb3I9IiM2YzgwZmYiIHN0b3Atb3BhY2l0eT0iLjY4Ii8+PHN0b3Agb2Zmc2V0PSIuNDciIHN0b3AtY29sb3I9IiM1MjZhZmYiIHN0b3Atb3BhY2l0eT0iLjc5Ii8+PHN0b3Agb2Zmc2V0PSIuNTgiIHN0b3AtY29sb3I9IiMzZTU5ZmYiIHN0b3Atb3BhY2l0eT0iLjg4Ii8+PHN0b3Agb2Zmc2V0PSIuNyIgc3RvcC1jb2xvcj0iIzMwNGNmZiIgc3RvcC1vcGFjaXR5PSIuOTUiLz48c3RvcCBvZmZzZXQ9Ii44MyIgc3RvcC1jb2xvcj0iIzI4NDVmZiIgc3RvcC1vcGFjaXR5PSIuOTkiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyNTQzZmYiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50LTIiIHgxPSI4MDguMzciIHkxPSItNTUuNDQiIHgyPSI4MDguMzciIHkyPSIyNDcuNDciIHhsaW5rOmhyZWY9IiNsaW5lYXItZ3JhZGllbnQiLz48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0zIiB4MT0iNzAxLjk2IiB5MT0iLTYxLjQ0IiB4Mj0iNzAxLjk2IiB5Mj0iMjQ5LjM1IiB4bGluazpocmVmPSIjbGluZWFyLWdyYWRpZW50Ii8+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQtNCIgeDE9IjU5MC41IiB5MT0iLTU1LjAzIiB4Mj0iNTkwLjUiIHkyPSIyNDguNTMiIHhsaW5rOmhyZWY9IiNsaW5lYXItZ3JhZGllbnQiLz48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC01IiB4MT0iNDY3LjU0IiB5MT0iLTU1LjE1IiB4Mj0iNDY3LjU0IiB5Mj0iMjQ4LjU0IiB4bGluazpocmVmPSIjbGluZWFyLWdyYWRpZW50Ii8+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQtNiIgeDE9IjM0My45MiIgeTE9Ii01MiIgeDI9IjM0My45MiIgeTI9IjI0OC4xNCIgeGxpbms6aHJlZj0iI2xpbmVhci1ncmFkaWVudCIvPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50LTciIHgxPSIyMDYuNjciIHkxPSItNTUuNDQiIHgyPSIyMDYuNjciIHkyPSIyNDcuNDciIHhsaW5rOmhyZWY9IiNsaW5lYXItZ3JhZGllbnQiLz48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC04IiB4MT0iNzIuNjIiIHkxPSItNTMuMyIgeDI9IjcyLjYyIiB5Mj0iMjUzLjgiIHhsaW5rOmhyZWY9IiNsaW5lYXItZ3JhZGllbnQiLz48c3R5bGU+LmNscy0ye2ZpbGw6I2ZmZn08L3N0eWxlPjwvZGVmcz48cGF0aCBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudCkiIGQ9Ik04NzMuOCAyMTQuMnYtMTYuOGwxMS43LTExLjdWMTA1bC0xMS43LTExLjh2LTE1bDI2LjMtMjYuM2gxNC40bDE0LjMgMTQuM3Y5LjZoMTYuNHYtOS42bDE0LjMtMTQuM2gxNS4zbDI0LjcgMjQuN3YyNy4xbC0xNC4yIDE0LjJoLTM5LjJ2LTExLjVoLTUuNHYxMDcuOGgtNjYuOXoiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik05NzMuMSA1NS45bDIyLjQgMjIuNFYxMDJsLTExLjggMTEuOWgtMzMuNnYtMTEuNWgtMTMuNHYxMDcuOGgtNTguOXYtMTEuMWwxMS43LTExLjd2LTg0LjFsLTExLjctMTEuN1Y3OS44bDIzLjktMjMuOWgxMS4xbDEyIDEydjExLjloMjQuNFY2Ny45bDEyLTEyaDExLjltMy4zLThoLTE4LjZsLTIuMyAyLjMtMTIgMTItMi4zIDIuM3Y3LjNoLTguNHYtNy4zbC0yLjMtMi4zLTEyLTEyLTIuNC0yLjNoLTE3LjdsLTIuMyAyLjMtMjQgMjQtMi4zIDIuM3YxOC40bDIuMyAyLjMgOS40IDkuNFYxODRsLTkuNCA5LjQtMi4zIDIuNHYyMi40aDc0Ljl2LTk2LjNIOTg3bDIuMy0yLjQgMTEuOS0xMS44IDIuMy0yLjRWNzVsLTIuMy0yLjQtMjIuNC0yMi40LTIuNC0yLjN6Ii8+PHBhdGggZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQtMikiIGQ9Ik03NzEuOCAyNDAuNmwtMzEuNS00NC45IDQ0LjMgMjkuNSAxNi0xNlYyMDRoLTExLjJsLTQ5LjgtNDkuOFY3Ny4zbDEzLjktMTMuOWg1Mi43djI4LjdsLTExLjMgMTEuM3YzNGwyMS4xIDIxLjFoMTkuNHYtNTguNGwtOC04di0xN2wxMS0xMWgzOC43djc5LjRsLTguOSA4Ljl2MzYuOGwtNjkuMyA2OS40LTI3LjEtMTh6Ii8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNODAyLjIgNjcuNHYyMy4xbC0xMS4zIDExLjNWMTM5bDIzLjUgMjMuNWgyNXYtNjRsLTgtOFY3Ni43bDguNy04LjZoMzN2NzMuOGwtOC45IDguOXYzNi44bC02NS44IDY1LjgtMjMuNy0xNS43LTE4LjktMjYuOCAyOS4zIDE5LjUgMTkuNS0xOS41VjIwMGgtMTMuNWwtNDcuNS00Ny41Vjc4LjlsMTEuNi0xMS41aDQ3bTgtOGgtNTguM2wtMi40IDIuNEw3MzggNzMuM2wtMi40IDIuM3Y4MC4zbDIuNCAyLjMgNDcuNCA0Ny40IDIuNCAyLjRoOC40bC0xMi4xIDEyLjEtMjMuOC0xNS45LTM1LjYtMjMuNyAyNC42IDM0LjkgMTguOCAyNi45LjkgMS4yIDEuMi45IDIzLjggMTUuNyA1LjQgMy42IDQuNy00LjYgNjUuOC02NS45IDIuMy0yLjN2LTM2LjhsNi42LTYuNiAyLjMtMi4zVjYwLjFoLTQ0LjNsLTIuNCAyLjMtOC42IDguNy0yLjQgMi4zdjIwLjRsMi40IDIuMyA1LjYgNS43djUyLjdoLTEzLjdsLTE4LjgtMTguOHYtMzAuNmw4LjktOSAyLjQtMi4zVjU5LjR6Ii8+PHBhdGggZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQtMykiIGQ9Ik02ODQuMSAyMTQuMmwtMjIuNi0yMi42di04NS4yaC0xMlY3Ni4xaDE0LjRsNTQuNC01NC45djUzLjZINzQzdjMxLjZoLTI0Ljd2NjQuNWg2LjdsMTcuMi0xNy4yIDEyLjIgMTIuMnYyMi40bC0yNS44IDI1LjloLTQ0LjV6Ii8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNNzE0LjMgMzAuOXY0Ny45SDczOXYyMy42aC0yNC43djcyLjVoMTIuM2wxNS42LTE1LjUgOC4yIDguMnYxOS4xbC0yMy41IDIzLjVoLTQxLjJMNjY1LjUgMTkwdi04Ny42aC0xMlY4MC4xaDEybDQ4LjgtNDkuMm04LTE5LjNsLTEzLjYgMTMuNy00Ni41IDQ2LjhoLTE2Ljd2MzguM2gxMnY4Mi45bDIuNCAyLjMgMjAuMiAyMC4yIDIuMyAyLjRoNDcuOGwyLjQtMi40IDIzLjUtMjMuNSAyLjMtMi4zdi0yNS43bC0yLjMtMi40LTguMi04LjItNS43LTUuNi01LjYgNS42LTEzLjMgMTMuMmgtMXYtNTYuNUg3NDdWNzAuOGgtMjQuN1YxMS42eiIvPjxwYXRoIGQ9Ik01MjkuNCAyMTQuMmwtMTQuMy0xNC4zdi03NC4zbDE0LjMtMTQuM2g3NC4xbC0xNi4zLTE2LjJINTQ1TDUyNy4xIDExM1Y2NS44bDE1LjItMTUuMkg2MjVsMjcuOCAyNy44djkyLjNoMTMuMXYzMS41aC0xNS40bC0xMiAxMnptNjguMi0zMS41di0zOS41aC0xNnYzOS41eiIgZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQtNCkiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik02MjMuMyA1NC42bDI1LjUgMjUuNXY5NC42aDEzLjF2MjMuNWgtMTMuMWwtMTIgMTJINTMxLjFsLTEyLTEydi03MC45bDEyLTEyaDgybC0yNC4yLTI0LjJoLTQ1LjZsLTEyLjIgMTIuMlY2Ny40bDEyLjgtMTIuOGg3OS40bS00NS43IDEzMi4xaDI0di00Ny41aC0yNHY0Ny41bTQ5LTE0MC4xaC04NmwtMi4zIDIuMy0xMi45IDEyLjktMi4zIDIuM1YxMTJsLTkuNiA5LjYtMi40IDIuNHY3Ny41bDIuNCAyLjQgMTEuOSAxMS45IDIuNCAyLjRoMTEyLjNsMi40LTIuNCA5LjYtOS42aDE3Ljh2LTM5LjVoLTEzLjF2LTkwbC0yLjMtMi4zTDYyOSA0OC45bC0yLjQtMi4zem0tODAgNTIuNWgzOWw4LjIgOC4yaC01NS40bDguMi04LjJ6bTM5IDQ4LjFoOHYzMS41aC04di0zMS41eiIvPjxwYXRoIGZpbGw9InVybCgjbGluZWFyLWdyYWRpZW50LTUpIiBkPSJNNDA0LjcgMjE0LjJ2LTE2LjhsMTEuNy0xMS43VjEwNWwtMTEuNy0xMS44di0xNUw0MzEgNTEuOWgxNC40bDE0LjMgMTQuM3Y5LjZoMTYuNHYtOS42bDE0LjMtMTQuM2gxNS4zbDI0LjcgMjQuN3YyNy4xbC0xNC4yIDE0LjJoLTM5LjN2LTExLjVoLTUuNHYxMDcuOGgtNjYuOHoiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik01MDQgNTUuOWwyMi40IDIyLjRWMTAybC0xMS45IDExLjloLTMzLjZ2LTExLjVoLTEzLjR2MTA3LjhoLTU4Ljh2LTExLjFsMTEuNy0xMS43di04NC4xbC0xMS43LTExLjdWNzkuOGwyMy45LTIzLjloMTEuMWwxMiAxMnYxMS45aDI0LjRWNjcuOWwxMS45LTEyaDEybTMuMy04aC0xOC42bC0yLjMgMi4zLTEyIDEyLTIuMyAyLjN2Ny4zaC04LjR2LTcuM2wtMi40LTIuMy0xMS45LTEyLTIuNC0yLjNoLTE3LjdsLTIuMyAyLjMtMjQgMjQtMi4zIDIuM3YxOC40bDIuMyAyLjMgOS40IDkuNFYxODRsLTkuNCA5LjQtMi4zIDIuNHYyMi40aDc0Ljh2LTk2LjNoNDIuM2wyLjQtMi40IDExLjktMTEuOCAyLjMtMi40Vjc1bC0yLjMtMi40LTIyLjQtMjIuNC0yLjQtMi4zeiIvPjxwYXRoIGQ9Ik0zNjQuMSAyMTQuMnYtMTIuNEgzNDRsLTEyLjQgMTIuNGgtMjMuMmwtMzYuMy0zNi4zVjg3LjNsMzUuMS0zNS4yaDI0LjRsMTQgMTRoNC42di0yMGwtMTAuMy0xMC4zVjEyaDE4LjVsOC04aDMxLjNMNDA4IDE0LjN2MTU4LjhsNy43IDcuN3YxMC42TDM5MyAyMTQuMnptLTEzLjktNDMuNVY5NC41aC0yOS43bC05LjIgOS4ydjQ1LjlsMjEuMSAyMS4xeiIgZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQtNikiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik0zOTYgOGw4IDh2MTU4LjdsNy43IDcuOHY3LjNsLTIwLjQgMjAuNGgtMjMuMnYtMTIuNGgtMjUuOGwtMTIuNCAxMi40SDMxMGwtMzMuOS0zMy45Vjg4LjlsMzIuOC0zMi44aDIxbDE0IDE0aDEwLjNWNDQuNWwtMTAuMy0xMC4zVjE2aDE2LjJsOC04SDM5Nm0tNjUuMiAxNjYuN2gyMy40VjkwLjVoLTM1LjNMMzA3LjMgMTAydjQ5LjNsMjMuNSAyMy40TTM5OS4zIDBoLTM0LjVsLTIuNCAyLjMtNS42IDUuN2gtMjAuOXYyOS41bDIuNCAyLjMgNy45IDh2MTMuM2wtMTAuNi0xMC42LTIuNC0yLjRoLTI3LjZsLTIuNCAyLjQtMzIuOCAzMi44LTIuMyAyLjN2OTRsMi4zIDIuMyAzNCAzMy45IDIuMyAyLjRoMjYuNWwyLjQtMi40IDEwLjEtMTBoMTQuNHYxMi40aDM0LjVsMi40LTIuNCAyMC40LTIwLjQgMi4zLTIuM3YtMTMuOWwtMi4zLTIuNC01LjQtNS40VjEyLjdsLTIuNC0yLjQtNy45LTgtMi40LTIuM3ptLTc3LjEgOTguNWgyNHY2OC4yaC0xMi4xTDMxNS4zIDE0OHYtNDIuN2w2LjktNi44eiIvPjxwYXRoIGZpbGw9InVybCgjbGluZWFyLWdyYWRpZW50LTcpIiBkPSJNMTcwLjEgMjQwLjZsLTMxLjUtNDQuOSA0NC4zIDI5LjUgMTYtMTZWMjA0aC0xMS4ybC00OS44LTQ5LjhWNzcuM2wxMy45LTEzLjloNTIuN3YyOC43bC0xMS4zIDExLjN2MzRsMjEuMSAyMS4xaDE5LjR2LTU4LjRsLTgtOHYtMTdsMTEtMTFoMzguN3Y3OS40bC04LjkgOC45djM2LjhsLTY5LjMgNjkuNC0yNy4xLTE4eiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTIwMC41IDY3LjR2MjMuMWwtMTEuMyAxMS4zVjEzOWwyMy41IDIzLjVoMjV2LTY0bC04LThWNzYuN2w4LjctOC42aDMzdjczLjhsLTguOSA4Ljl2MzYuOGwtNjUuOCA2NS44LTIzLjctMTUuNy0xOC45LTI2LjggMjkuMyAxOS41IDE5LjUtMTkuNVYyMDBoLTEzLjVsLTQ3LjUtNDcuNVY3OC45bDExLjYtMTEuNWg0N204LThoLTU4LjRsLTIuMyAyLjQtMTEuNSAxMS41LTIuNCAyLjN2ODAuM2wyLjQgMi4zIDQ3LjQgNDcuNCAyLjQgMi40aDguM2wtMTIgMTIuMS0yMy44LTE1LjktMzUuNi0yMy43IDI0LjYgMzQuOSAxOC44IDI2LjkuOSAxLjIgMS4yLjkgMjMuOCAxNS43IDUuNCAzLjYgNC42LTQuNiA2NS45LTY1LjkgMi4zLTIuM3YtMzYuOGw2LjYtNi42IDIuMy0yLjNWNjAuMWgtNDQuM2wtMi40IDIuMy04LjYgOC43LTIuNCAyLjN2MjAuNGwyLjQgMi4zIDUuNiA1Ljd2NTIuN0gyMTZsLTE4LjgtMTguOHYtMzAuNmw4LjktOSAyLjQtMi4zVjU5LjR6Ii8+PHBhdGggZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQtOCkiIGQ9Ik04NSAyMDcuNmwxMy45LTQwLjd2LTM4TDczIDEwM2wtMTMuMyAxMy4zdjU2LjNsMTAuNyAxMC44djMwLjhINFYyMS45TDIxLjkgNGg0OC42djU5LjRoNDYuOWwyMy44IDIzLjl2OTQuOGwtMzYuMiAzNy01OS45IDE2TDg1IDIwNy42eiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTY2LjUgOHY1OS40aDQ5LjJsMjEuNSAyMS41djkxLjZsLTM0LjMgMzUtMzYuNSA5LjggMjEuOS0xNS4xIDE0LjYtNDIuNnYtNDAuM0w3MyA5Ny4zbC0xNy4zIDE3LjN2NTkuN0w2Ni40IDE4NXYyNS4ySDhWMjMuNUwyMy41IDhoNDNtOC04SDIwLjJsLTIuMyAyLjNMMi4zIDE3LjkgMCAyMC4ydjE5OGg2Mi42bC0uNy41LTM4LjEgMjYuMkw2OC41IDIzM2wzNi40LTkuNyAyLjItLjYgMS41LTEuNiAzNC40LTM1IDIuMi0yLjNWODUuNmwtMi4zLTIuMy0yMS41LTIxLjUtMi4zLTIuNEg3NC41VjB6TTYzLjcgMTE3LjlsOS4zLTkuMiAyMS45IDIxLjl2MzUuN2wtMTMuMyAzOC44LTcuMiA0Ljl2LTI4LjNsLTIuMy0yLjMtOC40LTguNHYtNTMuMXoiLz48L3N2Zz4=" alt="hydratyr" width="1003.5138" height="263.6973" style="max-width: 100%; height: auto; display: block;">
</div>

hydratyr is a proof-of-concept React/Preact wrapper component that uses the [idle-until-urgent pattern](https://philipwalton.com/articles/idle-until-urgent/) to hydrate its children. It does this by scheduling an idle callback without a deadline to hydrate the component's children, but registers an intersection observer to immediately hydrate the child component if it is in view (and if the idle callback hasn't already ran).

## Why?

[Component hydration](https://reactjs.org/docs/react-dom.html#hydrate) is [an expensive process](https://css-tricks.com/radeventlistener-a-tale-of-client-side-framework-performance/#the-results) that is used on pre-rendered/server-side rendered markup to restore its client-side functionality. When used sparingly, it's not so much of a problem, but when used across many components on the same page, the main thread can take a drubbing.



## Installation and usage

Installation is the usual thing
